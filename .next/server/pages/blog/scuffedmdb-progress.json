{"pageProps":{"mdxSource":{"compiledSource":"var l=Object.defineProperty,d=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var m=(e,n,t)=>n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,a=(e,n)=>{for(var t in n||(n={}))p.call(n,t)&&m(e,t,n[t]);if(o)for(var t of o(n))c.call(n,t)&&m(e,t,n[t]);return e},r=(e,n)=>d(e,N(n));var u=typeof require!=\"undefined\"?require:e=>{throw new Error('Dynamic require of \"'+e+'\" is not supported')};var i=(e,n)=>{var t={};for(var s in e)p.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&o)for(var s of o(e))n.indexOf(s)<0&&c.call(e,s)&&(t[s]=e[s]);return t};const makeShortcode=e=>function(t){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",a({},t))},Image=makeShortcode(\"Image\"),Aside=makeShortcode(\"Aside\"),Definition=makeShortcode(\"Definition\"),Sparkles=makeShortcode(\"Sparkles\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:e}=s,n=i(s,[\"components\"]);return mdx(MDXLayout,r(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(Image,{alt:\"My new movie rating site, ScuffedMDB.\",src:\"/static/images/blog/scuffedmdb-progress/banner.png\",width:1905/2,height:957/2,layout:\"responsive\",blurDataURL:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAIklEQVQImWNgYBDnFZCxsfc0tvJkCI/O+vP/f0tdhZK8CgBLPAfARKUieAAAAABJRU5ErkJggg==\",placeholder:\"blur\",mdxType:\"Image\"}),mdx(\"h1\",a({},{id:\"introduction\"}),mdx(\"a\",a({parentName:\"h1\"},{href:\"#introduction\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"Introduction\"),mdx(\"p\",null,\"About two months ago I wrote a blog post about my experience with \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://smdb.mikeroph.one\"}),\"ScuffedMDB\"),\" and how I made it, since then I have made some pretty big changes, and I wanted to share some of them with you.\"),mdx(\"p\",null,\"As I explained in my previous blog post, I made this website to rate movies with my friends, without any annoying ads or annoying UX features, it does what it says on the tin. It has come to the point where it is open source and takes less than fifteen minutes to setup your own instance, if you want to do so there are instructions on the \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://github.com/mah51/scuffedmdb/#README\"}),\"repo\"),\". It is completely free to host thanks to the brilliant \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://vercel.com\"}),\"Vercel\"),\" platform.\"),mdx(\"h1\",a({},{id:\"user-experience\"}),mdx(\"a\",a({parentName:\"h1\"},{href:\"#user-experience\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"User Experience\"),mdx(\"p\",null,\"When weighing up my changes, I decided to highlight the UX changes first. UX is very important to keep the site simple and easy to use which is what I really care about.\"),mdx(\"h2\",a({},{id:\"say-no-to-modals\"}),mdx(\"a\",a({parentName:\"h2\"},{href:\"#say-no-to-modals\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"Say no to modals\"),mdx(\"p\",null,\"On the original site, there was one main home page, and then three individual modals, one to add movies, one to add reviews, and one to see the details of a selected movie. Having this arrangement was a shortcut, as it was easier to code, but after I posted it to reddit it was quite clear that this was a very confusing way to display information. So I endeavoured to make a movie details page that was able to display more data and be slightly more intuitive.\"),mdx(Image,{border:!0,alt:\"New movie details page\",src:\"/static/images/blog/scuffedmdb-progress/details-page.png\",width:1920,height:1080,mdxType:\"Image\"}),mdx(\"p\",null,\"I am happy how this page turned out, and I am able to display a lot more information about the movie in a way that isn't cluttered.\"),mdx(\"h2\",a({},{id:\"editing-reviews-made-easier\"}),mdx(\"a\",a({parentName:\"h2\"},{href:\"#editing-reviews-made-easier\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"Editing reviews made easier\"),mdx(\"p\",null,\"Another big UX improvement is related to editing reviews, previously there wasn't an 'editing' state while writing reviews, submitting a review would overwrite the previous. I changed this so the review modal would pre-populate with the old review. Now you don't have to re-type out a whole review just because you made a typo!\"),mdx(Image,{src:\"/static/images/blog/scuffedmdb-progress/review-editing.png\",ratio:476/441,chakraWidth:\"50%\",layout:\"fill\",border:!0,alt:\"Editing a review with autofill\",mdxType:\"Image\"}),mdx(\"p\",null,\"However, this didn't come without its challenges. As I wanted to be able to make the review modal accessible from the movie details page too, I needed to be able to share context around the web app, showing what movie is currently selected in the modal and whether it is open or closed. Thankfully I was able to do this by using \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://reactjs.org/docs/context.html\"}),\"react-context\"),\".\"),mdx(Aside,{type:\"neutral\",title:\"Allowing the review modal to be opened by any component\",mdxType:\"Aside\"},mdx(\"p\",null,`To allow other components to utilise the review modal I had to\nuse React's `,mdx(\"inlineCode\",{parentName:\"p\"},\"useContext\"),\" function. Whilst this is a perfect scenario to use react-context, it was still a new feature to me, so I had to do some googling.\"),mdx(\"p\",null,\"I use a ModalContext file to initiate the methods and properties I want the context to have.\"),mdx(\"div\",a({},{className:\"remark-code-title\"}),\"utils/ModalContext.ts\"),mdx(\"pre\",a({},{className:\"language-jsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-jsx\"}),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword module\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"ReviewModalContext\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"React\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"createContext\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"ReviewContext\")),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\">\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    isOpen`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"false\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"onOpen\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=>\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"onClose\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=>\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    movie`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword null nil\"}),\"null\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"setMovie\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=>\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),`);\n\n`))),mdx(\"p\",null,\"These properties are then initialized in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"pages/_app\"),\" component.\"),mdx(\"div\",a({},{className:\"remark-code-title\"}),\"pages/_app.tsx\"),mdx(\"pre\",a({},{className:\"language-jsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-jsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"MyApp\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"Component\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" pageProps \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"AppProps\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"React\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"ReactChild\")),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" onOpen\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" onClose\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" isOpen \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"useDisclosure\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// A chakra-ui utility to open and close modals\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"movie\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" setMovie\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" useState\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"<\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"SerializedMovieType\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"<\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"ReviewType\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"PopulatedUserType\")),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\">\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),`[]\n  > | null>(null);\n\n  return (\n      `),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"ReviewModalContext.Provider\")),`\n        `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"value\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token script language-javascript\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token script-punctuation punctuation\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\" isOpen\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" onOpen\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" onClose\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" movie\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" setMovie \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),`\n      `,mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\">\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),`\n        `),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"Component\")),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token spread\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token spread operator\"}),\"...\"),\"pageProps\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"/>\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),`\n      `),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"</\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"ReviewModalContext.Provider\")),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\">\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),`\n  )\n}\n`))),mdx(\"p\",null,\"This then allows me to utilise the \",mdx(\"inlineCode\",{parentName:\"p\"},\"useContext\"),\" function to open, close, or set the movie for the modal.\"),mdx(\"pre\",a({},{className:\"language-jsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-jsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword module\"}),\"import\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token imports\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\" useContext \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword module\"}),\"from\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'react'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword module\"}),\"import\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token imports\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"ReviewModalContext\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword module\"}),\"from\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./utils/ModalContext'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"SomeComponent\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" onOpen\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" onClose\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" isOpen\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" setMovie \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"useContext\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"ReviewModalContext\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword control-flow\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"Button\")),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"onClick\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token script language-javascript\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token script-punctuation punctuation\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\"onClose\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\">\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"Close modal!\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"</\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"Button\")),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\">\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"h2\",a({},{id:\"changing-authentication-provider\"}),mdx(\"a\",a({parentName:\"h2\"},{href:\"#changing-authentication-provider\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"Changing authentication provider\"),mdx(\"p\",null,\"Whilst this doesn't initially seem like a UX problem, the old auth I was using was botched together from some code I found online. This caused a few problems, such as the user being logged out every time they closed the browser. As my understanding of JWT tokens and cookies is criminally minimal, I decided to switch to \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://github.com/nextauthjs/next-auth\"}),\"next-auth\"),\".\"),mdx(\"p\",null,\"This basically handles all of the authentication, and was very simple to configure the basic functionality, however I did struggle extending properties on the user component.\"),mdx(\"p\",null,\"Additionally, this allowed me to add quite an important feature for those who wish to use this as a closed off community. You can now set a list of discord ids in \",mdx(\"inlineCode\",{parentName:\"p\"},\"ALLOWED_USERS\"),\" in \",mdx(\"inlineCode\",{parentName:\"p\"},\".env.local\"),\". This function is called on every log in attempt and goes through each discord id to check if the user logging in is in that list:\"),mdx(\"div\",a({},{className:\"remark-code-title\"}),\"pages/api/[...nextauth].ts\"),mdx(\"pre\",a({},{className:\"language-jsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-jsx\"}),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"async\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"signIn\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),\"user\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" account\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" profile\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token constant\"}),\"ALLOWED_USERS\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" process\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"env\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token constant\"}),\"ALLOWED_USERS\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword control-flow\"}),\"if\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token constant\"}),\"ALLOWED_USERS\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword control-flow\"}),\"if\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n      `,mdx(\"span\",a({parentName:\"code\"},{className:\"token constant\"}),\"ALLOWED_USERS\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token method function property-access\"}),\"replace\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token regex\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token regex-delimiter\"}),\"/\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token regex-source language-regex\"}),\"\\\\s\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token regex-delimiter\"}),\"/\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"''\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token method function property-access\"}),\"split\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"','\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token method function property-access\"}),\"includes\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"profile\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"?.\"),\"id \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword module\"}),\"as\"),\" string\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n      `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword control-flow\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword control-flow\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"false\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword control-flow\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n`)),mdx(\"h1\",a({},{id:\"performance\"}),mdx(\"a\",a({parentName:\"h1\"},{href:\"#performance\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"Performance\"),mdx(\"h2\",a({},{id:\"using-the-nextimage-component\"}),mdx(\"a\",a({parentName:\"h2\"},{href:\"#using-the-nextimage-component\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"Using the next/image component\"),mdx(\"p\",null,\"Whilst this is very easy to implement, it provides a great improvement in page load performance. You have probably already seen it in action, every image on this blog is only loaded as it scrolls into the \",mdx(Definition,{term:\"viewport\",definition:\"The area of the web-page that the user can see\",mdxType:\"Definition\"}),\". This component will also resize, optimize, cache and serve the images in modern formats such as WebP. This provided a huge improvement in page load speed, however there is still room for improvement here. Together the SSR and cold-start take longer than I would like, but that is the draw-back with serverless hosting and once warm, the page load times are fast enough. For more information on the next/image component you can read the \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://nextjs.org/docs/api-reference/next/image\"}),\"next/image docs\"),\".\"),mdx(\"h1\",a({},{id:\"small-improvements\"}),mdx(\"a\",a({parentName:\"h1\"},{href:\"#small-improvements\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"Small improvements\"),mdx(\"p\",null,\"There are many other small improvements that I have made, but I don't have time to go into them all, or we would be here all day. So instead I am just going to whack them all into a list!\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Allow host to change the accent colour throughout the website via the \",mdx(\"inlineCode\",{parentName:\"li\"},\".env.local\"),\" file.\")),mdx(Image,{src:\"/static/images/blog/scuffedmdb-progress/site-accent.png\",ratio:1920/1080,layout:\"fill\",border:!0,alt:\"Website with a teal accent color\",mdxType:\"Image\"}),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Implement a mobile nav with hamburger button (much like the one on this site).\"),mdx(\"li\",{parentName:\"ul\"},\"Markdown support for review comments.\"),mdx(\"li\",{parentName:\"ul\"},\"Hide your discord image on the site, it is replaced with a default discord image.\"),mdx(\"li\",{parentName:\"ul\"},\"Show the most recent movie on a card at the top of the page, allowing the user to open a review modal with one click.\"),mdx(\"li\",{parentName:\"ul\"},\"Filter movies by genre.\"),mdx(\"li\",{parentName:\"ul\"},\"Added a table view so users can scroll through the content a lot faster.\")),mdx(Image,{src:\"/static/images/blog/scuffedmdb-progress/table-view.png\",ratio:1920/1080,layout:\"fill\",border:!0,alt:\"The new table view.\",mdxType:\"Image\"}),mdx(Sparkles,{mdxType:\"Sparkles\"},\"- Added support for webhooks and made a discord bot to send details about movies and reviews to a discord server once added. (Okay... this isn't a small one, I'll have a seperate blog post on this :))\"),mdx(\"h2\",a({},{id:\"an-quick-note-about-typescript\"}),mdx(\"a\",a({parentName:\"h2\"},{href:\"#an-quick-note-about-typescript\",\"aria-hidden\":\"true\",tabIndex:-1}),mdx(\"span\",a({parentName:\"a\"},{className:\"icon icon-link\"}))),\"An quick note about typescript\"),mdx(\"p\",null,\"For the majority of the time typescript has been amazing, however I have had a bit of trouble trying to integrate it with all the different User instances. For example, if it is serialized, from next auth, from mongoDB etc, the properties on the object change as do their types. I tried a few different tricks but have settled on leaving it unsolved for now. It got to the point where it would take more time to solve the typescript issue than any issues that came around from the unknown types.\"),mdx(Aside,{type:\"positive\",title:\"Thank you very much for reading!\",mdxType:\"Aside\"},\"Whilst I do write these for myself, it's also great if it helps other people out! So thank you for reading through and I hope I helped you out just a little bit. If you would like to host ScuffedMDB for yourself, you can visit\",mdx(\"a\",{href:\"https://github.com/mah51/scuffedmdb\"},\" the repository\"),\".\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"frontMatter":{"wordCount":1350,"readingTime":{"text":"7 min read","minutes":6.74,"time":404400,"words":1348},"slug":"scuffedmdb-progress","title":"Big changes I made to ScuffedMDB.","publishedAt":"2021-10-01","summary":"I have made a lot of changes to my movie rating site ScuffedMDB over the last couple of months, here's why.","tags":["ScuffedMDB","Web Development","Next.JS","Chakra-UI","Movie Rating"],"by":{"name":"Michael Hall","avatar":"/static/images/profile.jpeg"},"image":"/static/images/blog/scuffedmdb-progress/banner.png","published":true}},"__N_SSG":true}